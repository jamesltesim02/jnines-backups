!function(e){function t(e,t,n){return invokeContainerBridge({service:"cache",method:e,data:t},n)}if(!$.appVersion().isApp){e.invokeContainerBridge=function(e,t,n){var a;return e.data=e.data?encodeURIComponent(JSON.stringify(e.data)):"",n=!(!1===n),$.ajax({url:"/gateway",type:"POST",data:e,dataType:"json",async:n,success:function(e){n?t&&t(null,e):a=e},error:function(){a={code_http:500,message:"访问接口失败"},n&&t&&t(a)},complete:function(){}}),a};var n={alreadys:{},domain:function(){return location.protocol+"//"+location.host+"/"},cdnurl:function(){var e=JSBridge.net.invoke({url:"app/getCDNHostDns",data:{async:!1}});return e?(e=JSON.parse(e)).data.cdnHost:""}};JSBridge.on("beforeGetCahce",function(e){if(n[e.key]&&!n.alreadys[e.key]){var t=n[e.key]();JSBridge.cache.save(e.key,t),n.alreadys[e.key]=!0}}),JSBridge.on("afterSaveCahce",function(e){var n;"customer"==e.key&&(n=JSON.parse(e.value).cacheValue).user_token&&t("save",{key:e.key,value:JSON.stringify({cacheValue:{login_name:n.login_name,user_token:n.user_token}})},function(){})}),JSBridge.on("afterDeleteCahce",function(e){"customer"==e.key&&t("delete",{key:e.key},function(){JSBridge.cache.save("token_saved_to_bridge",!0)})}),JSBridge.on("afterClearCahce",function(e){"customer"==e.key&&JSBridge.cache.get("token_saved_to_bridge")&&t("delete",{key:"customer"},function(){JSBridge.cache.save("token_saved_to_bridge",!0)})});var a,o,r,i,c,s;o={save:function(e){e&&e.key&&(JSBridge.dispatch("beforeSaveCahce",e),store.set(e.key,e.value),JSBridge.dispatch("afterSaveCahce",e))},update:function(e){!1!==JSBridge.dispatch("beforeUpdateCahce",e)&&(store.set(e.key,e.value),JSBridge.dispatch("afterUpdateCahce",e))},get:function(e){var t;return JSBridge.dispatch("beforeGetCahce",e),t=store.get(e.key),JSBridge.dispatch("beforeAfterCahce",e),t},delete:function(e){var t;if(!1!==JSBridge.dispatch("beforeDeleteCahce",e))return t=store.remove(e.key),JSBridge.dispatch("afterDeleteCahce",e),t},clear:function(){var e;if(!1!==JSBridge.dispatch("beforeClearCahce",data))return e=store.clearAll(),JSBridge.dispatch("afterClearCahce",data),e}},r={invoke:function(e,t){var n=!(e&&e.params&&!1===e.params.async);return invokeContainerBridge({service:"net",method:"invoke",data:e},t,n)}},i={loading:function(e){console.log("菊花显示隐藏控制:"+JSON.stringify(e))}},c=function(){function e(e){var t=e.url;/^\w+?\/\w+?\.htm/gi.test(t)&&(t=OtherUtils.getDomain()+t),e.gameType?window.open(t):e.newViewWeb?window.open(t):location=t}return{outside:e,inside:e}}(),s={clearCookie:function(e){Object.getOwnPropertyNames(Cookies.get()).forEach(function(e,t){Cookies.remove(e)})},copy:function(){var e,t;return function(n){n&&n.value&&(e||((t=document.createElement("button")).className="clip-button",t.style.display="none",document.body.appendChild(t),(e=new Clipboard(".clip-button",{text:function(e){return n.value}})).on("success",function(e){$.toast.success("复制成功")}),e.on("error",function(e){$.toast.success("复制失败,请重试"),console.error(e)})),t.click())}}(),game:function(e){},deviceInfo:function(e){return{}},IPSUnread:function(e){},live800:function(e){},toggleGesture:function(e){},resetGesture:function(e){},getVersion:function(e){},checkUpdate:function(e){},log:function(e){},getSessionId:function(e){return{}},getParentId:function(e){return{}},getPalCode:function(e){return{}},getCookiedPalCode:function(e){return{}}},a={cache:o,net:r,ui:i,forward:c,driver:s},e.appInvoke=function(e){var t,n=JSON.parse(e),o=a[n.service],r=n.requestId,i=n.data;if(!o)throw new Error("Service '"+n.service+"' not found.");if(!o[n.method])throw new Error("Method '"+n.method+"' not found in service '"+n.service+"'.");if(t=o[n.method](i,function(e,t){var n=e?{status:!1,code_http:e.code_http,message:e.message,data:e}:{status:!0,data:JSON.stringify(t)};n.requestId=r,n.method="callback",JSCallback(n)}))return void 0===t.status&&(t={status:!0,data:t}),t.requestId=r,JSON.stringify(t)},JSCallback({method:"loadFinish"})}}(window);