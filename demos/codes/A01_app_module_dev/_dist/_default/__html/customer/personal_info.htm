<!DOCTYPE html><html><head><title>博天堂娱乐-娱乐航母,博彩天堂</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1"><meta name="format-detection" content="telephone=no"></head><body onclick="toggleSupport()"><link rel="stylesheet" href="../../__modules/ui-common/dist/ui-common.min.css"><link rel="stylesheet" href="../../__css/main.css"><template id="hImageTmpl"><a-img :src="src" remote="true"></a-img></template><template id="aImageTmpl"><div class="img-loader loading"><img ref="imgComp" :data-src="src"></div></template><template id="appTmpl"><div class="app-container"><div style="display:none" id="proTitle">{{title}}</div><app-content></app-content></div></template><template id="contentTmpl"><div class="display_flex_h bank_info"><div class="main_content"><section class="personaldata_content"><div class="layout_form"><form action="" method="post"><div class="form_field_wrap change_input"><div class="form_field"><span class="label">预留信息</span><div class="input_wrap txt_right"><input v-bind:disabled="nofinsh" v-if="addInfo" v-model="verify_code" class="txt_right" type="text" value="" placeholder="1-16位数字，字母或文字"><div class="reservedInfo" v-if="!addInfo"><span class="yellow2">{{verify_code}}</span></div></div></div><div class="form_field"><span class="label">真实姓名</span><div class="input_wrap txt_right"><input v-bind:disabled="nofinsh" v-model="real_name" class="txt_right" type="text" value="" placeholder="需与持卡人姓名相同"></div></div><div class="form_field"><span class="label">性别</span><div class="input_wrap txt_right select_left"><select v-model="sex"><option name="man">男</option><option name="woman">女</option></select></div></div><div class="form_field"><span class="label">出生日期</span><div class="input_wrap txt_right"><input v-model="birth_date" :readonly="birthdateAlready" class="txt_right" type="date" value="" placeholder=""> <span class="icon icon64" v-if="isfinsh"></span></div></div><div class="form_field"><span class="label">邮箱地址</span><div class="input_wrap txt_right"><input v-model="email" :readonly="emailAlready" class="txt_right" type="email" value="" placeholder=""></div></div><div class="form_field"><span class="label">地址</span><div class="input_wrap txt_right"><input v-model="address" class="txt_right" type="text" value="" placeholder=""></div></div><div class="form_field"><span class="label">备注</span><div class="input_wrap txt_right"><input v-model="remarks" class="txt_right" type="text" value="" placeholder=""></div></div></div><div class="form_btn-wrap"><a id="submitButton" href="javascript: void(0);" class="btn btn-lg btn-ylw" @click="submitInfo">保存</a></div></form></div></section></div></div></template><div id="container"></div><script>!function(n){var t;n.ENV_MODEL="app",n.appState=(t={},{getData:function(){return t},setData:function(n){t=Object.assign(t,n)}}),n.appInstance=null,n.bus=null}(window)</script><script src="../../__js/common/constant.js"></script><script src="../../__modules/es6-shim/es6-shim.min.js"></script><script src="../../__modules/es7-shim/dist/es7-shim.min.js"></script><script src="../../__modules/hybrid-fastclick/dist/hybrid-fastclick.min.js"></script><script src="../../__modules/jquery/dist/jquery.min.js"></script><script src="../../__modules/jsbridge-core/dist/jsbridge-core.min.js"></script><script src="../../__modules/jsbridge-util/dist/jsbridge-util.min.js"></script><script src="../../__modules/vue/dist/vue.min.js"></script><script src="../../__modules/ui-common/dist/ui-common.min.js"></script><script src="../../__modules/business-util/dist/business-util.min.js"></script><script src="../../__js/modules/dropload.min.js"></script><script src="../../__modules/iscroll/build/iscroll.js"></script><script src="../../__js/common/utils.js"></script><script>Vue.component("h-img",{template:"#hImageTmpl",props:["src"]}),function(){function e(e){this.quee=[],this.loaded=!1,this.type=e}e.prototype={loadImage:function(e){var t=e.dataset.src;"remote"==this.type&&(t=OtherUtils.getStaticurl()+t),e.src=t},add:function(e){if(this.loaded)return this.loadImage(e);this.quee.push(e)},load:function(){for(;this.quee&&this.quee.length;)this.loadImage(this.quee.shift());this.loaded=!0}};var t=new e("local"),a=new e("remote");Vue.component("a-img",{template:"#aImageTmpl",props:["src","remote"],watch:{src:function(e,t){var a=this.$refs.imgComp;this.remote&&(e=OtherUtils.getStaticurl()+e),a.src="",a.src=e,a.parentNode.className="img-loader loading"}},mounted:function(){var e=this.$refs.imgComp;e.onload=function(){this.parentNode.className="img-loader"},e.onerror=function(e){this.onload()},this.loadImage()},methods:{loadImage:function(){(this.remote?a:t).add(this.$refs.imgComp)}}}),window.addEventListener("load",t.load.bind(t)),JSBridge.onReady(a.load.bind(a))}(),window.App=Vue.extend({template:"#appTmpl",data:function(){return{title:""}}}),FastClick.attach(document.body,{tapDelay:100}),function(){var e={verify_code:"",real_name:"",sex:"",birth_date:"",formated_birthday:"",birthday:null,email:"",address:"",remarks:"",nofinsh:!0,isfinsh:!0,addInfo:!0,emailAlready:!1,birthdateAlready:!1};appState.setData({title:"个人资料",needLogin:!0}),Vue.component("app-content",{template:"#contentTmpl",data:function(){return e},watch:{birth_date:function(e,t){e?(this.birthday=new Date(Date.parse(this.birth_date)),this.formated_birthday=this.birthday.Format("yyyy-MM-dd 00:00:00")):(this.birthday=null,this.formated_birthday=null)},real_name:function(e,t){this.real_name=(""+e).toLowerCase()}},methods:{submitInfo:function(){var e=this;if(updatecontrol)return function(){var t,a=JSBridge.cache.get("customer").pwd;if(!(e.birth_date&&e.sex&&a))return $.toast.fail("生日、性别必须填写"),!1;if(e.birth_date&&((t=new Date).setFullYear(t.getFullYear()-18),e.birthday.getTime()>t.getTime()))return $.toast.fail("您的年龄未满十八岁"),!1;var r={sex:"男"==e.sex?"M":"F",birth_date:e.formated_birthday,email:e.email,address:e.address,remarks:e.remarks,pwd:a};JSBridge.net.invoke({url:"users/updateInfo",data:r,success:function(e){var t=Object.assign(JSBridge.cache.get("customer"),r);JSBridge.cache.update("customer",t),$.toast.success("修改成功",function(){JSBridge.forward.inside({url:"customer/member_center.htm"})})},error:function(e){$.toast.fail(e.message)}})}(),!1;var t,a=/^(\w|[\u4e00-\u9fa5]){1,16}$/.test(e.verify_code),r=/^(\w|·|\*|[\u4e00-\u9fa5])+$/.test(e.real_name);if(!a)return $.toast.fail("预留信息填写错误"),!1;if(!r)return $.toast.fail("真实姓名填写错误"),!1;if(e.birth_date&&(year18Date=new Date,year18Date.setFullYear(year18Date.getFullYear()-18),e.birthday.getTime()>year18Date.getTime()))return $.toast.fail("您的年龄未满十八岁"),!1;t={verify_code:e.verify_code,real_name:e.real_name,sex:"男"==e.sex?"M":"F",birth_date:e.formated_birthday,email:e.email,address:e.address,remarks:e.remarks},JSBridge.net.invoke({url:"users/completeInfo",data:t,success:function(a){var r=Object.assign(JSBridge.cache.get("customer"),t);if(JSBridge.cache.update("customer",r),e.address||e.remarks){var i=r.pwd,s={sex:"男"==e.sex?"M":"F",birth_date:e.formated_birthday,email:e.email,address:e.address,remarks:e.remarks,pwd:i};JSBridge.net.invoke({url:"users/updateInfo",data:s,success:function(e){var t=Object.assign(JSBridge.cache.get("customer"),s);JSBridge.cache.update("customer",t)},error:function(e){$.toast.fail(e.message)}})}$.toast.success("完善资料成功",function(){var e=$.getParam("from");e?JSBridge.forward.inside({url:decodeURIComponent(e),newView:!0}):JSBridge.forward.inside({url:"customer/member_center.htm"})})},error:function(e){$.toast.fail(e.message)}})}}}),JSBridge.onReady(function(){var t=e;CustomerUtils.isLoged()&&CheckUtil.infoCompleted(function(){t.isfinsh=!0,updatecontrol=!0,t.addInfo=!1,JSBridge.net.invoke({url:"users/userInfo",data:{},success:function(e){var a=e.WSCustomers,r=a.real_name.length,i=new String;t.verify_code=a.verify_code;for(var s=0;s<r-1;s++)i+="*";t.real_name=i+a.real_name.charAt(r-1),t.sex="M"==a.sex?"男":"女",t.birth_date=a.birth_date?a.birth_date.slice(0,10):"",t.email=a.email,t.birthdateAlready=5==a.customer_level||6==a.customer_level,CheckUtil.emailBinded(function(){t.emailAlready=!0},function(){t.emailAlready=!1}),t.address=a.address,t.remarks=a.remarks,t.nofinsh=!0},error:function(e){$.toast.fail(e.message)}})},function(){t.isfinsh=!1,updatecontrol=!1,t.addInfo=!0,t.nofinsh=!1})})}()</script><script>var e=appState.getData();function a(){var e=$(".header_index .pop_support");e.hasClass("hide")||0!=e.attr("is_show")||e.addClass("hide")}bus=new Vue,e.needLogin&&!CustomerUtils.isLoged()?JSBridge.onReady(function(){JSBridge.forward.inside({url:"common/login.htm?from="+OtherUtils.getPath(),newView:"true"})}):appInstance=new App({el:"#container",data:e})</script></body></html>