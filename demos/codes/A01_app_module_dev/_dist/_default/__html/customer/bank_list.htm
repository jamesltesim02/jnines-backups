<!DOCTYPE html><html><head><title>博天堂娱乐-娱乐航母,博彩天堂</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1"><meta name="format-detection" content="telephone=no"></head><body onclick="toggleSupport()"><link rel="stylesheet" href="../../__modules/ui-common/dist/ui-common.min.css"><link rel="stylesheet" href="../../__css/main.css"><style></style><template id="hImageTmpl"><a-img :src="src" remote="true"></a-img></template><template id="aImageTmpl"><div class="img-loader loading"><img ref="imgComp" :data-src="src"></div></template><template id="appTmpl"><div class="app-container"><div style="display:none" id="proTitle">{{title}}</div><app-content></app-content></div></template><template id="contentTmpl"><div class="add_bank_card_content"><div v-for="(item, key) in list" class="bank_card_item"><div class="tools"><span class="title">绑定银行卡（{{key+1}}）</span> <a v-show="isThanDelete && noPengding" @click="deleteBank(item)" class="delete"><i class="icon icon99"></i>删除</a> <a v-show="item.flag == 9 || item.flag == 0" class="delete">审核中</a> <a v-show="isThanDelete && noPengding" @click="editBank(item)" class="edit"><i class="icon icon98"></i>修改</a></div><div class="clearfix"></div><div class="card" @click="setDefault(item)"><img class="bank_logo" v-bind:src="'../../__static/__images/bankinformation/'+bankLogo(item.bank_name)+'.png'"> <a v-if="item.is_default == 1" class="def"><img src="../../__static/__images/add_bank_card/btn1.png"> </a><a v-if="item.is_default != 1" class="def"><img src="../../__static/__images/add_bank_card/dbtn2.png"></a><p class="type">{{item.bank_account_type}}|{{item.branch_name}}</p><p class="account_num">{{mixed(item.bank_account_no)}}</p><p class="branch">{{item.bank_city}}{{item.bank_name}}</p></div></div><div v-show="isThanAdd && noPengding" class="bank_card_item"><a forward="forward" newview="true" href="customer/bank_add.htm"><div class="add_bank_card_item"><img src="../../__static/__images/add_bank_card/icon3.png"><p>添加银行卡</p></div></a></div></div></template><div id="container"></div><script>!function(n){var t;n.ENV_MODEL="app",n.appState=(t={},{getData:function(){return t},setData:function(n){t=Object.assign(t,n)}}),n.appInstance=null,n.bus=null}(window)</script><script src="../../__js/common/constant.js"></script><script src="../../__modules/es6-shim/es6-shim.min.js"></script><script src="../../__modules/es7-shim/dist/es7-shim.min.js"></script><script src="../../__modules/hybrid-fastclick/dist/hybrid-fastclick.min.js"></script><script src="../../__modules/jquery/dist/jquery.min.js"></script><script src="../../__modules/jsbridge-core/dist/jsbridge-core.min.js"></script><script src="../../__modules/jsbridge-util/dist/jsbridge-util.min.js"></script><script src="../../__modules/vue/dist/vue.min.js"></script><script src="../../__modules/ui-common/dist/ui-common.min.js"></script><script src="../../__modules/business-util/dist/business-util.min.js"></script><script src="../../__js/modules/dropload.min.js"></script><script src="../../__modules/iscroll/build/iscroll.js"></script><script src="../../__js/common/utils.js"></script><script>Vue.component("h-img",{template:"#hImageTmpl",props:["src"]}),function(){function e(e){this.quee=[],this.loaded=!1,this.type=e}e.prototype={loadImage:function(e){var t=e.dataset.src;"remote"==this.type&&(t=OtherUtils.getStaticurl()+t),e.src=t},add:function(e){if(this.loaded)return this.loadImage(e);this.quee.push(e)},load:function(){for(;this.quee&&this.quee.length;)this.loadImage(this.quee.shift());this.loaded=!0}};var t=new e("local"),n=new e("remote");Vue.component("a-img",{template:"#aImageTmpl",props:["src","remote"],watch:{src:function(e,t){var n=this.$refs.imgComp;this.remote&&(e=OtherUtils.getStaticurl()+e),n.src="",n.src=e,n.parentNode.className="img-loader loading"}},mounted:function(){var e=this.$refs.imgComp;e.onload=function(){this.parentNode.className="img-loader"},e.onerror=function(e){this.onload()},this.loadImage()},methods:{loadImage:function(){(this.remote?n:t).add(this.$refs.imgComp)}}}),window.addEventListener("load",t.load.bind(t)),JSBridge.onReady(n.load.bind(n))}(),window.App=Vue.extend({template:"#appTmpl",data:function(){return{title:""}}}),FastClick.attach(document.body,{tapDelay:100}),function(){var e={list:[],noPengding:!1,isThanDelete:!1,isThanAdd:!1};function t(e){JSBridge.net.invoke({url:"bankcard/getList",data:{flag:"9;1",order:"PRIORITY_ORDER",delete_flag:"0"},success:function(t){if(JSBridge.cache.save("bindingBankCardCountData",{data:t.length,outtime:(new Date).getTime()+6e5},1),!t)return e.noPengding=!0,void(e.isThanAdd=!0);t&&t.length>1&&(e.isThanDelete=!0),t&&t.length>=0&&t.length<3&&(e.isThanAdd=!0),e.list=t},error:function(e){$.toast.fail(e.message)}})}appState.setData({needLogin:!0,title:"银行卡资料"}),Vue.component("app-content",{template:"#contentTmpl",data:function(){return e},mounted:function(){},methods:{deleteBank:function(e){$.pop.confirm("要删除银行卡?","若以后继续使用该卡需重新添加并审核",function(){JSBridge.cache.delete("bankCardDeleteData"),JSBridge.cache.save("bankCardDeleteData",{data:e,outtime:(new Date).getTime()+6e5},1),JSBridge.forward.inside({url:"customer/bank_delete_verify.htm",newView:!0})})},editBank:function(e){if(e&&e.login_name&&e.customer_bank_id){var t=e.login_name+"bankCardEditData";JSBridge.cache.delete(t),JSBridge.cache.save(t,{data:e,outtime:(new Date).getTime()+72e5},1),JSBridge.forward.inside({url:"customer/bank_edit_verify.htm",newView:!0})}else $.toast.fail("修改银行卡异常错误")},setDefault:function(n){1!=n.is_default&&JSBridge.net.invoke({url:"bankcard/update",data:{flag:1,save_default:1,bank_flag:1,customer_bank_id:n.customer_bank_id},success:function(n){Request.approve(n.request_id,"06",function(){$.toast.success("设置成功",1,function(){t(e)})},function(){$.toast.fail("设置失败")})},error:function(e){$.toast.fail("设置失败:"+e.message)}})},bankLogo:function(e){return{"招商银行":"bank_logo1","交通银行":"bank_logo18","农业银行":"bank_logo3","工商银行":"bank_logo5","建设银行":"bank_logo4","中国银行":"bank_logo22","邮政银行":"bank_logo27","平安银行":"bank_logo13","民生银行":"bank_logo10","光大银行":"bank_logo29","兴业银行":"bank_logo24","平安银行":"bank_logo13","中信银行":"bank_logo6","浦发银行":"bank_logo17","广发银行":"bank_logo2","华夏银行":"bank_logo28","中国邮政银行":"bank_logo27","深圳发展银行":"bank_logo26","邮政储蓄":"bank_logo27","邮政银行":"bank_logo27","邮政储蓄银行":"bank_logo27","农村信用合作社":"bank_logo25"}[e]},mixed:function(e){return e.slice(0,1)+"*".repeat(e.length-5)+e.slice(e.length-4,e.length)}}}),JSBridge.onReady(function(){if(CustomerUtils.isLoged()){var n=e;t(n),CheckUtil.isPendingBankApply(function(){n.noPengding=!0},function(){var e=0,t=0;n.list.forEach(function(n,a){var o=parseInt(n.priority_order);o>e&&(e=o,t=a)}),n.list[t].flag="0",n.noPengding=!1})}else JSBridge.forward.inside({url:"customer/member_center.htm",newView:!0})})}()</script><script>var e=appState.getData();function a(){var e=$(".header_index .pop_support");e.hasClass("hide")||0!=e.attr("is_show")||e.addClass("hide")}bus=new Vue,e.needLogin&&!CustomerUtils.isLoged()?JSBridge.onReady(function(){JSBridge.forward.inside({url:"common/login.htm?from="+OtherUtils.getPath(),newView:"true"})}):appInstance=new App({el:"#container",data:e})</script></body></html>