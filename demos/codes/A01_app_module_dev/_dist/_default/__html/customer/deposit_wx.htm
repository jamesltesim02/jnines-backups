<!DOCTYPE html><html><head><title>博天堂娱乐-娱乐航母,博彩天堂</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1"><meta name="format-detection" content="telephone=no"></head><body onclick="toggleSupport()"><link rel="stylesheet" href="../../__modules/ui-common/dist/ui-common.min.css"><link rel="stylesheet" href="../../__css/main.css"><template id="hImageTmpl"><a-img :src="src" remote="true"></a-img></template><template id="aImageTmpl"><div class="img-loader loading"><img ref="imgComp" :data-src="src"></div></template><template id="appTmpl"><div class="app-container"><div style="display:none" id="proTitle">{{title}}</div><app-content></app-content></div></template><template id="contentTmpl"><div class="main_content" v-show="onready"><section v-show="step==1" class="onlinepayment_content"><div class="banner"><span class="icon" :class="paymentIcon"></span><h3 class="lblue">{{paymentTitle}}</h3></div><div class="layout_form"><div class="form_field_wrap"><div v-if="!!verify_code" class="form_field"><span class="label">预留信息</span><div class="input_wrap txt_right"><div class="reservedInfo"><span class="yellow2">{{verify_code}}</span></div></div></div><div class="form_field"><span class="label">金额</span><div class="input_wrap"><input v-model="amount" class="txt_right" type="number" :placeholder="'最少' + types[typeIndex].amountMin + '，最多' + types[typeIndex].amountMax"></div></div><div class="form_field"><span class="label">支付方式</span><div class="input_wrap txt_right"><select v-model="typeIndex" v-on:change="paymentMethod"><option v-for="(t,i) in types" :value="i">{{t.name}}</option></select></div></div></div><div class="form_btn-wrap"><a @click="nextStep" class="btn btn-lg btn-ylw">保存</a></div></div></section><section v-show="step==2" class="onlinepayment_content _02"><div class="flt-header"><span>微信确认支付订单：</span></div><div class="layout_form"><form ref="payForm" :action="order.des_url" method="post"><input type="hidden" name="amount" :value="order.amount"> <input type="hidden" name="keycode" :value="order.keycode"> <input type="hidden" name="memo" :value="order.memo"> <input type="hidden" name="paycode" :value="order.paycode"> <input type="hidden" name="billdate" :value="order.billdate"> <input type="hidden" name="billno" :value="order.billno"> <input type="hidden" name="product" :value="order.product"> <input type="hidden" name="currency" :value="order.currency"> <input type="hidden" name="loginname" :value="loginname"><div class="form_field_wrap"><div class="form_field"><span>订单号：</span> <span class="dark_gray">{{order.billno}}</span></div><div class="form_field"><span>支付金额：</span> <span class="lbue2 bold">¥ {{order.amount}}</span></div></div><div class="form_btn-wrap"><a @click="pay" class="btn btn-lg btn-ylw">确认支付</a></div></form></div></section></div></template><div id="container"></div><script>!function(n){var t;n.ENV_MODEL="app",n.appState=(t={},{getData:function(){return t},setData:function(n){t=Object.assign(t,n)}}),n.appInstance=null,n.bus=null}(window)</script><script src="../../__js/common/constant.js"></script><script src="../../__modules/es6-shim/es6-shim.min.js"></script><script src="../../__modules/es7-shim/dist/es7-shim.min.js"></script><script src="../../__modules/hybrid-fastclick/dist/hybrid-fastclick.min.js"></script><script src="../../__modules/jquery/dist/jquery.min.js"></script><script src="../../__modules/jsbridge-core/dist/jsbridge-core.min.js"></script><script src="../../__modules/jsbridge-util/dist/jsbridge-util.min.js"></script><script src="../../__modules/vue/dist/vue.min.js"></script><script src="../../__modules/ui-common/dist/ui-common.min.js"></script><script src="../../__modules/business-util/dist/business-util.min.js"></script><script src="../../__js/modules/dropload.min.js"></script><script src="../../__modules/iscroll/build/iscroll.js"></script><script src="../../__js/common/utils.js"></script><script>Vue.component("h-img",{template:"#hImageTmpl",props:["src"]}),function(){function e(e){this.quee=[],this.loaded=!1,this.type=e}e.prototype={loadImage:function(e){var t=e.dataset.src;"remote"==this.type&&(t=OtherUtils.getStaticurl()+t),e.src=t},add:function(e){if(this.loaded)return this.loadImage(e);this.quee.push(e)},load:function(){for(;this.quee&&this.quee.length;)this.loadImage(this.quee.shift());this.loaded=!0}};var t=new e("local"),n=new e("remote");Vue.component("a-img",{template:"#aImageTmpl",props:["src","remote"],watch:{src:function(e,t){var n=this.$refs.imgComp;this.remote&&(e=OtherUtils.getStaticurl()+e),n.src="",n.src=e,n.parentNode.className="img-loader loading"}},mounted:function(){var e=this.$refs.imgComp;e.onload=function(){this.parentNode.className="img-loader"},e.onerror=function(e){this.onload()},this.loadImage()},methods:{loadImage:function(){(this.remote?n:t).add(this.$refs.imgComp)}}}),window.addEventListener("load",t.load.bind(t)),JSBridge.onReady(n.load.bind(n))}(),window.App=Vue.extend({template:"#appTmpl",data:function(){return{title:""}}}),FastClick.attach(document.body,{tapDelay:100}),function(){var e={onready:!1,paymentIcon:"icons_payment_wechat",paymentTitle:"扫码支付",step:1,verify_code:"",loginname:"",amount:"",typeIndex:0,order:{},types:[{payid:0,code:"wxPay",key:6,name:"微信支付",amountMin:100,amountMax:1500}]};function t(){var t=e;if(t.types[t.typeIndex]){var n=t.types[t.typeIndex];switch(n.key){case 5:case 9:t.paymentIcon="icons_payment_alipay";break;case 7:t.paymentIcon="icons_payment_qq";break;case 15:t.paymentIcon="icons_payment_bank";break;default:t.paymentIcon="icons_payment_wechat"}t.paymentTitle=n.name}}function n(){$.toast.fail("当前支付已关闭,请选用其他支付方式",function(){JSBridge.cache.delete("paymentStatusByAllData"),JSBridge.forward.inside({url:"customer/member_center.htm"})})}appState.setData({title:"扫码支付",needLogin:!0}),Vue.component("app-content",{template:"#contentTmpl",data:function(){return e},methods:{paymentMethod:function(){t()},nextStep:function(){if(this.types[this.typeIndex]){var e=this.types[this.typeIndex];if(e.payid){if(getexpire())return!0;if(!(this.amount.match(/^[1-9]+\d+[.\d]{0,3}$/)&&this.amount>=Number(e.amountMin)&&this.amount<=Number(e.amountMax)))return $.toast.fail("存款金额必须是"+e.amountMin+"~"+e.amountMax+"之间,最大允许2位小数"),!1;var t=this;setexpire(),JSBridge.net.invoke({url:"payment/onlinePay",data:{type:e.key,payId:e.payid,amount:t.amount},success:function(e){t.order=e,setTimeout(function(){t.step=2},1e3)},error:function(e){$.toast.fail(e?e.message:"创建订单失败,请稍后重试或咨询客服")}})}else $.toast.fail("支付方式没有开启的状态")}else n()},pay:function(){this.types[this.typeIndex]&&2==this.step&&this.$refs.payForm.submit()}}}),JSBridge.onReady(function(){if(!CustomerUtils.isLoged())return null;var a=e,i=JSBridge.cache.get("customer");a.verify_code=i.verify_code,a.loginname=i.login_name,JSBridge.net.invoke({url:"A01/payment/detail",data:{type:"QRCode"},success:function(e){e?e.gotoLink?JSBridge.forward.inside({url:e.gotoLink,newView:!0}):(a.types=e,a.onready=!0,t()):n()},error:n})})}()</script><script>var e=appState.getData();function a(){var e=$(".header_index .pop_support");e.hasClass("hide")||0!=e.attr("is_show")||e.addClass("hide")}bus=new Vue,e.needLogin&&!CustomerUtils.isLoged()?JSBridge.onReady(function(){JSBridge.forward.inside({url:"common/login.htm?from="+OtherUtils.getPath(),newView:"true"})}):appInstance=new App({el:"#container",data:e})</script></body></html>