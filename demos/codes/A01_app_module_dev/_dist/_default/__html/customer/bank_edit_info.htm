<!DOCTYPE html><html><head><title>博天堂娱乐-娱乐航母,博彩天堂</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1"><meta name="format-detection" content="telephone=no"></head><body onclick="toggleSupport()"><link rel="stylesheet" href="../../__modules/ui-common/dist/ui-common.min.css"><link rel="stylesheet" href="../../__css/main.css"><template id="hImageTmpl"><a-img :src="src" remote="true"></a-img></template><template id="aImageTmpl"><div class="img-loader loading"><img ref="imgComp" :data-src="src"></div></template><template id="appTmpl"><div class="app-container"><div style="display:none" id="proTitle">{{title}}</div><app-content></app-content></div></template><template id="contentTmpl"><div class="display_flex_h bank_info"><div class="main_content"><div class="add_bank_card_content _03" v-show="step==2"><div class="layout_form"><div class="form_field_wrap"><div class="form_field"><span class="label">持卡人姓名</span><div class="input_wrap txt_right"><div class="reservedInfo"><input read-only="" class="txt_right" type="text" readonly v-bind:value="mixed(bank_account_name)"></div></div></div><div class="form_field"><span class="label">开户行</span><div class="input_wrap txt_right"><select v-model="bank_name" v-on:change="bankNameSelect"><option value="">请选择收款银行类别</option><option value="招商银行">招商银行</option><option value="交通银行">交通银行</option><option value="农业银行">农业银行</option><option value="工商银行">工商银行</option><option value="建设银行">建设银行</option><option value="中国银行">中国银行</option><option value="民生银行">民生银行</option><option value="光大银行">光大银行</option><option value="兴业银行">兴业银行</option><option value="平安银行">平安银行</option><option value="中信银行">中信银行</option><option value="浦发银行">浦发银行</option><option value="广发银行">广发银行</option><option value="华夏银行">华夏银行</option><option value="中国邮政银行">中国邮政银行</option><option value="深圳发展银行">深圳发展银行</option><option value="农村信用合作社">农村信用合作社</option></select></div></div><div class="form_field"><span class="label">卡片类别</span><div class="input_wrap txt_right"><select v-model="bank_account_type"><option value="借记卡">借记卡</option><option value="信用卡">信用卡</option><option value="存折">存折</option></select></div></div><div class="form_field"><span class="label">卡号</span><div class="input_wrap txt_right"><input v-model.trim="bank_account_no" class="txt_right" type="text" placeholder="请输入银行卡号" maxlength="19"></div></div><div class="form_field"><span class="label">开户省份</span><div class="input_wrap txt_right"><select v-model.trim="bank_country" id="prov" name="province" v-on:change="provinceSelect"><option v-for="p in provinces" :value="p">{{p || "请选择省份"}}</option></select></div></div><div class="form_field"><span class="label">开户城市</span><div class="input_wrap txt_right"><select v-model.trim="bank_city" id="accountcity" name="city"><option v-for="c in citys" :value="c">{{c || "请选择城市"}}</option></select></div></div><div class="form_field"><span class="label">开户网点</span><div class="input_wrap txt_right"><input v-model.trim="branch_name" class="txt_right" type="text" placeholder="请填写具体开户地点" maxlength="20"></div></div></div><p v-show="isSlow" style="text-align:center;padding-top:15px;color:#d19538">绑定此银行取款较慢，取款24小时内到账</p><div class="form_btn-wrap"><a @click="saveBank" class="btn btn-lg btn-blu3" style="width:40%;float:left;font-size:1.2rem;line-height:40px;height:auto;padding:1px 3px">保存</a> <a @click="saveDefaultBank" class="btn btn-lg btn-ylw" style="width:50%;float:right;font-size:1.2rem;line-height:40px;height:auto;padding:1px 3px">保存并设置为取款卡</a></div></div></div><div class="bank_card_edit_info" v-show="step==1"><ul class="verify"><li v-show="isManual"><p>原绑定电话:</p><i class="icon"></i></li><li v-show="isManual"><p>{{phone}}</p></li><li v-show="isManual"><p>核对原来绑定电话：</p></li><li v-show="isManual"><input type="text" v-model.trim="newPhone" maxlength="11" placeholder="输入绑定的手机号" v-on:blur="blurVerify"> <i class="icon" v-bind:class="phoneState" @click="phoneEmptyInput"></i></li><li><p>原绑定银行卡：</p></li><li><p>{{bankcardNo}}</p></li><li><p>核对原来绑定银行卡：</p></li><li><input type="text" v-model.trim="newBankcardNo" maxlength="19" placeholder="输入绑定的银行卡号" v-on:blur="blurVerify"> <i class="icon" v-bind:class="bankcardNoState" @click="bankcardNoEmptyInput"></i></li></ul><a @click="checkVerifyInfo" class="yellow">下一步</a></div><div class="add_bank_card_content _02" v-show="step==3"><div class="success-msg"><div class="icon-content" v-if="isSuccess"><img src="../../__static/__images/add_bank_card/ok.png"></div><div class="icon-content" v-else=""><img src="../../__static/__images/add_bank_card/warn.png"></div><p class="p1">{{sucTitle}}</p><p class="p2">{{sucContent}}</p><div class="button-content"><div class="form_btn-wrap"><a forward="inside" newview="true" href="customer/member_center.htm" class="btn btn-lg btn-blu3" style="height:41px">会员中心</a> <a forward="inside" newview="true" href="customer/bank_list.htm" class="btn btn-lg btn-ylw" style="height:41px">银行卡资料</a></div></div></div></div></div></div></template><div id="container"></div><script>!function(n){var t;n.ENV_MODEL="app",n.appState=(t={},{getData:function(){return t},setData:function(n){t=Object.assign(t,n)}}),n.appInstance=null,n.bus=null}(window)</script><script src="../../__js/common/constant.js"></script><script src="../../__modules/es6-shim/es6-shim.min.js"></script><script src="../../__modules/es7-shim/dist/es7-shim.min.js"></script><script src="../../__modules/hybrid-fastclick/dist/hybrid-fastclick.min.js"></script><script src="../../__modules/jquery/dist/jquery.min.js"></script><script src="../../__modules/jsbridge-core/dist/jsbridge-core.min.js"></script><script src="../../__modules/jsbridge-util/dist/jsbridge-util.min.js"></script><script src="../../__modules/vue/dist/vue.min.js"></script><script src="../../__modules/ui-common/dist/ui-common.min.js"></script><script src="../../__modules/business-util/dist/business-util.min.js"></script><script src="../../__js/modules/dropload.min.js"></script><script src="../../__modules/iscroll/build/iscroll.js"></script><script src="../../__js/common/utils.js"></script><script src="../../__modules/city-dic/dist/city-dic.min.js"></script><script>Vue.component("h-img",{template:"#hImageTmpl",props:["src"]}),function(){function a(a){this.quee=[],this.loaded=!1,this.type=a}a.prototype={loadImage:function(a){var n=a.dataset.src;"remote"==this.type&&(n=OtherUtils.getStaticurl()+n),a.src=n},add:function(a){if(this.loaded)return this.loadImage(a);this.quee.push(a)},load:function(){for(;this.quee&&this.quee.length;)this.loadImage(this.quee.shift());this.loaded=!0}};var n=new a("local"),t=new a("remote");Vue.component("a-img",{template:"#aImageTmpl",props:["src","remote"],watch:{src:function(a,n){var t=this.$refs.imgComp;this.remote&&(a=OtherUtils.getStaticurl()+a),t.src="",t.src=a,t.parentNode.className="img-loader loading"}},mounted:function(){var a=this.$refs.imgComp;a.onload=function(){this.parentNode.className="img-loader"},a.onerror=function(a){this.onload()},this.loadImage()},methods:{loadImage:function(){(this.remote?t:n).add(this.$refs.imgComp)}}}),window.addEventListener("load",n.load.bind(n)),JSBridge.onReady(t.load.bind(t))}(),window.App=Vue.extend({template:"#appTmpl",data:function(){return{title:""}}}),FastClick.attach(document.body,{tapDelay:100}),function(){var a={loginName:"",bankcardId:"",bankcardNo:"",phone:"",newBankcardNo:"",newPhone:"",bank_account_name:"",bank_name:"",bank_account_type:"借记卡",bank_account_no:"",bank_country:"",bank_city:"",branch_name:"",save_default:0,provinces:CityUtils.getProvinces(),citys:[""],bankcardNoState:"icon_enter",phoneState:"icon_enter",step:1,isManual:!1,isSlow:!1,sucTitle:"修改成功",sucContent:"修改银行资料成功",isSuccess:!0};function n(n,t){var e=a;n?(e.sucTitle=e.isManual?e.save_default?"申请已提交,此卡已修改为默认取款卡":"申请已提交":"修改成功",e.sucContent=e.isManual?"相关人员将在24小时内审核并添加,请耐心等待":e.save_default?"此卡已修改为默认取款卡":"修改银行资料成功",JSBridge.cache.delete(e.loginName+"bankCardPhoneEditVerifyTimesData")):(e.sucTitle="修改失败",e.sucContent=t),JSBridge.cache.delete(e.loginName+"bankCardEditData"),e.isSuccess=n,setTimeout(function(){e.step=3},1e3)}function t(){var n=a.bank_name;return!!n&&("工商银行"!=n&&"农业银行"!=n&&"建设银行"!=n&&"招商银行"!=n&&"交通银行"!=n&&"中国银行"!=n)}function e(){var n=null,t=a.loginName+"bankCardEditData",e=JSBridge.cache.get(t);return e&&(new Date).getTime()<e.outtime&&(n=e.data),n}appState.setData({needLogin:!0,title:"修改银行卡"}),Vue.component("app-content",{template:"#contentTmpl",data:function(){return a},watch:{bank_country:function(a,n){this.citys=CityUtils.getCitys(this.bank_country),this.bank_city=this.bank_city?this.bank_city:""}},methods:{provinceSelect:function(){this.citys=CityUtils.getCitys(this.bank_country),this.bank_city=""},bankNameSelect:function(){this.isSlow=t()},phoneEmptyInput:function(){this.newPhone=""},bankcardNoEmptyInput:function(){this.newBankcardNo=""},blurVerify:function(){this.isManual&&(this.newPhone&&this.newPhone.match(/^1[34578]\d{9}$/)||(this.phoneState="icon_enter")),this.newBankcardNo&&this.newBankcardNo.match(/^\d{16,19}$/)||(this.bankcardNoState="icon_enter")},checkVerifyInfo:function(){var a=this;!a.isManual||a.newPhone&&a.newPhone.match(/^1[34578]\d{9}$/)?a.newBankcardNo&&a.newBankcardNo.match(/^\d{16,19}$/)?JSBridge.net.invoke({url:"bankcard/editverify",data:{phone:a.newPhone,bankcardId:a.bankcardId,bankcardNo:a.newBankcardNo},success:function(n){a.phoneState=a.bankcardNoState="icon_ok",a.isSlow=t(),setTimeout(function(){a.step=2},1e3),setTimeout(function(){a.bankcardNo=a.newBankcardNo},2e3)},error:function(a){$.toast.fail(a.message?a.message:"原始资料不正确,请核实")}}):$.toast.fail("请输入正确绑定的银行卡号"):$.toast.fail("请输入正确绑定的手机号")},saveDefaultBank:function(){this.save_default=1,this.saveBank()},saveBank:function(){var a=this;if(getexpire())return!0;if(""!=a.bank_name)if(""!=a.bank_account_type)if(/[\d]+\*/.test(a.bank_account_no)||/^\d{16,19}$/.test(a.bank_account_no))if(a.bank_country)if(a.bank_city)if(a.branch_name.match(/^[^\s\"\'\`\,]{2,20}$/))if(a.bankcardNo!=a.bank_account_no){setexpire();var t=e();JSBridge.net.invoke({url:"bankcard/update",data:{customer_bank_id:a.bankcardId,bank_account_name:a.bank_account_name,bank_name:a.bank_name,bank_account_type:a.bank_account_type,bank_account_no:a.bank_account_no,bank_country:a.bank_country,bank_city:a.bank_city,branch_name:a.branch_name,bank_flag:1,save_default:a.save_default,old_bank_account_name:t.bank_account_name,old_bank_account_no:t.bank_account_no,old_bank_account_type:t.bank_account_type,old_bank_country:t.bank_country,old_bank_city:t.bank_city,old_bank_name:t.bank_name,old_branch_name:t.branch_name,old_bank_flag:t.bank_flag,old_priority_order:t.priority_order},success:function(t){a.isManual||JSBridge.net.invoke({url:"apply/approve",data:{request_id:t.request_id,request_type:"06"},success:function(a){}}),n(!0,"")},error:function(a){n(!1,a.message?a.message:"修改银行资料失败")}})}else $.toast.fail("修改的银行卡号与原卡号相同");else $.toast.fail("请正确输入开户网点,且长度必须在 2和 20之间");else $.toast.fail("请正确选择开户城市");else $.toast.fail("请正确选择开户省份");else $.toast.fail("银行账号一般长度在16至19位");else $.toast.fail("请正确选择卡片类别");else $.toast.fail("请正确选择银行类型")},mixed:function(a){var n=a.length;return a=a&&a.slice(0,1)+"*".repeat(n-2)+a.slice(n-1,n)}}}),JSBridge.onReady(function(){var n=a;CheckUtil.infoCompleted(function(a){n.bank_account_name=a.real_name,n.loginName=a.login_name,n.phone=a.phone},function(){$.toast.fail("请先完善用户信息",function(){JSBridge.forward.inside({url:"customer/personal_info.htm",newView:!0})})});var t=e();t?(n.bankcardId=t.customer_bank_id,n.bankcardNo=t.bank_account_no,n.isManual=!function(){var n=0;cacheKey=a.loginName+"bankCardPhoneEditVerifyTimesData";var t=JSBridge.cache.get(cacheKey);return t&&(new Date).getTime()<t.outtime&&(n=t.data.times?parseInt(t.data.times):0),!(n>3)}()):$.toast.fail("当前银行卡数据已过期，请重新进入修改页面",function(){JSBridge.forward.inside({url:"customer/bank_list.htm",newView:!0})})})}()</script><script>var e=appState.getData();function a(){var e=$(".header_index .pop_support");e.hasClass("hide")||0!=e.attr("is_show")||e.addClass("hide")}bus=new Vue,e.needLogin&&!CustomerUtils.isLoged()?JSBridge.onReady(function(){JSBridge.forward.inside({url:"common/login.htm?from="+OtherUtils.getPath(),newView:"true"})}):appInstance=new App({el:"#container",data:e})</script></body></html>